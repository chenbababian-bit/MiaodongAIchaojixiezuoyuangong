# 喵动AI写作平台 — 任务功能计划书

> **文档说明**：本计划书面向 DeepSeek / Claude 等 AI 编程助手，所有任务描述均使用精确的中文指令，确保 AI 可以稳定、独立地执行每一个任务。
>
> **执行原则**：每个 Task 相互独立，完成后可立即验证效果，不依赖后续任务。

---

## 📐 积分定价逻辑说明（Task 5 必读）

### 核心规则：1元 = 10积分（基础价）

充值越多，每元能买到的积分越多（折扣越大）。

| 套餐名称 | 充值金额 | 获得积分 | 每10积分单价 | 折扣力度 | 节省金额 |
|--------|--------|--------|-----------|--------|--------|
| 体验包  | ¥10    | 100积分  | ¥1.00     | 无折扣   | —      |
| 入门包  | ¥30    | 330积分  | ¥0.91     | 9.1折   | 节省¥3  |
| 标准包  | ¥50    | 600积分  | ¥0.83     | 8.3折   | 节省¥10 |
| 进阶包  | ¥100   | 1300积分 | ¥0.77     | 7.7折   | 节省¥30 |
| 专业包  | ¥200   | 2800积分 | ¥0.71     | 7.1折   | 节省¥80 |
| 旗舰包  | ¥500   | 7500积分 | ¥0.67     | 6.7折   | 节省¥250|

> ⚠️ **注意**：以上定价为建议方案，开发时以占位符形式写入，方便后期调整具体数字。

### 积分消耗逻辑（给开发者看的）

```
用户每次生成内容 → 系统计算本次消耗积分数 → 从用户积分余额中扣除 → 页面实时更新显示剩余积分
```

- 积分不足时：**不允许生成**，弹出"积分不足"提示，引导用户充值
- 积分扣除是**实时的**，不是批量结算

---

## 🗂️ 任务总览

| 任务编号 | 任务名称 | 所属模块 | 状态 |
|--------|--------|--------|-----|
| Task 2  | 积分余额显示（消费后自动扣减） | 积分系统 | 待开发 |
| Task 3  | 全局顶栏积分余额展示 | 积分系统 | 待开发 |
| Task 4  | 积分消费记录页面 | 积分系统 | 待开发 |
| Task 5  | 积分充值套餐页面 UI | 积分系统 | 待开发 |
| Task 6  | 各业务模块三层 UI 框架制作 | 内容模块 | 待开发 |
| Task 7  | 最底层功能卡片提示词代码填入 | 内容模块 | 待开发 |
| Task 8  | 订单记录页面 | 用户中心 | 待开发 |
| Task 9  | 我的文档列表页面 | 用户中心 | 待开发 |
| Task 10 | 文档详情页面 | 用户中心 | 待开发 |
| Task 11 | 积分不足提示弹窗 | 积分系统 | 待开发 |
| Task 12 | 登录跳转优化 | 系统优化 | 待开发 |
| Task 13 | 全流程最终测试 | 测试验收 | 待开发 |

---

## ✅ Task 2：积分余额显示（消费后自动扣减）

### 目标
用户每次使用 AI 生成内容后，系统自动扣除对应积分，并在页面上实时更新显示剩余积分数量。

### 白话解释（小白版）
> 就像手机话费一样：你打完电话，话费余额会自动减少。这里是：你用 AI 生成了一篇文章，积分余额就自动减少对应数量，页面上的数字立刻变小。

### 需要做的事情

**第一步：确认积分数据来源**
- 积分余额存储在数据库的用户表中（字段名：`credits` 或 `balance`）
- 每次生成内容时，后端 API 负责扣减积分
- 前端只需要：调用 API → 拿到最新余额 → 显示在页面上

**第二步：前端显示位置**
- 在用户账户相关页面（如"我的账户"或"用户中心"）显示当前积分余额
- 格式示例：`当前积分：1,280 分`

**第三步：实时更新机制**
- 用户点击"生成"按钮 → 生成完成后 → 重新请求积分余额接口 → 更新页面显示
- 不需要手动刷新页面，自动更新

### 验收标准
- [ ] 页面能正确显示当前积分数字
- [ ] 用户生成内容后，积分数字自动减少（无需刷新页面）
- [ ] 积分为 0 时，显示"积分不足"而不是负数

---

## ✅ Task 3：全局顶栏积分余额展示

### 目标
在网站顶部导航栏（Header）的右侧，始终显示当前用户的积分余额，让用户随时知道自己还有多少积分。

### 白话解释（小白版）
> 就像淘宝顶部会显示你的购物车数量一样，这里在顶部导航栏右侧显示"积分：1280"，用户不用进入账户页面就能看到。

### 需要做的事情

**第一步：在顶栏组件中添加积分显示区域**
- 位置：顶部导航栏右侧，用户头像/昵称旁边
- 样式：小图标（💎 或金币图标）+ 数字，例如：`💎 1,280`

**第二步：数据获取**
- 用户登录后，从接口获取积分余额
- 将积分数据存入全局状态（如 Zustand / Context）
- 顶栏组件从全局状态读取，不需要每次单独请求

**第三步：未登录状态处理**
- 未登录时：不显示积分，或显示"登录后查看"

### 验收标准
- [ ] 登录后顶栏右侧显示积分数字
- [ ] 用户消费积分后，顶栏数字同步更新
- [ ] 未登录时顶栏不显示积分区域

---

## ✅ Task 4：积分消费记录页面

### 目标
在用户中心提供一个"积分明细"页面，列出用户每一笔积分消耗记录（什么时候用了、用在哪个功能、消耗了多少积分）。

### 白话解释（小白版）
> 就像银行账单一样，你可以看到每一笔钱是什么时候花的、花在哪里了。这里是：你可以看到每次用 AI 生成内容时，消耗了多少积分。

### 需要做的事情

**第一步：页面路由**
- 路由地址：`/account/credits` 或 `/account/history`
- 从用户中心侧边栏可以进入

**第二步：列表展示**
每条记录显示以下信息：

| 字段 | 示例 |
|-----|-----|
| 时间 | 2024-01-15 14:30 |
| 使用功能 | 增长策略 - 增长战略蓝图 |
| 消耗积分 | -50 积分 |
| 剩余积分 | 1,230 积分 |

**第三步：分页**
- 每页显示 20 条记录
- 支持翻页（上一页 / 下一页）

### 验收标准
- [ ] 页面正常显示消费记录列表
- [ ] 每条记录包含时间、功能名称、消耗积分、剩余积分
- [ ] 分页功能正常工作

---

## ✅ Task 5：积分充值套餐页面 UI

### 目标
制作一个积分充值页面，展示所有充值套餐，让用户直观看到"充越多越划算"，并选择套餐（支付功能暂不接入，只做 UI）。

### 白话解释（小白版）
> 就像游戏充值页面一样，列出几个充值档位，标注每个档位能得到多少积分、打几折、能省多少钱，让用户一眼就知道哪个最划算。

### 套餐数据（开发时使用以下数据）

```javascript
const packages = [
  { name: "体验包",  price: 10,  credits: 100,  discount: null,    save: 0   },
  { name: "入门包",  price: 30,  credits: 330,  discount: "9.1折", save: 3   },
  { name: "标准包",  price: 50,  credits: 600,  discount: "8.3折", save: 10  },
  { name: "进阶包",  price: 100, credits: 1300, discount: "7.7折", save: 30  },
  { name: "专业包",  price: 200, credits: 2800, discount: "7.1折", save: 80  },
  { name: "旗舰包",  price: 500, credits: 7500, discount: "6.7折", save: 250 },
]
```

### 页面布局要求

**套餐卡片（每个套餐一张卡片）显示内容：**
1. 套餐名称（如"标准包"）
2. 充值金额（大字显示，如 **¥50**）
3. 获得积分（如"获得 600 积分"）
4. 折扣标签（如橙色标签"8.3折"，体验包不显示折扣标签）
5. 节省金额（如绿色小字"节省 ¥10"，体验包不显示）
6. 选择按钮（文字："立即充值"，点击后暂时只显示 Toast 提示"支付功能即将上线"）

**推荐套餐高亮：**
- "进阶包"（¥100）设为推荐套餐，卡片边框高亮 + 顶部显示"推荐"标签

### 验收标准
- [ ] 6个套餐卡片全部正确显示
- [ ] 折扣和节省金额数字正确
- [ ] "进阶包"有推荐高亮样式
- [ ] 点击"立即充值"弹出"支付功能即将上线"提示

---

## ✅ Task 6：各业务模块三层 UI 框架制作

### 目标
为以下所有业务模块，按照"运营模块"的现有结构，制作完整的三层 UI 框架（第一层分类 → 第二层子分类 → 第三层功能卡片列表）。

### 白话解释（小白版）
> 网站左侧菜单里有"运营"、"产品"、"销售"等模块，每个模块点进去后有子菜单，子菜单里有功能卡片。现在"运营"模块已经做好了，需要把其他模块也按同样的结构做出来。

### 需要制作的模块列表

**职能类模块（参考运营模块结构）：**
- 产品
- 销售
- 设计
- 人力
- 技术
- 咨询模型
- 财务

**行业类模块（参考运营模块结构）：**
- 零售
- 本地生活
- 招商连锁
- 影视
- 媒体
- 地产
- 物流
- 生产
- 电子
- 教育
- 医疗
- 投行
- 金融保险
- 法务
- 运输
- 工商
- 税务
- 电商

### 三层结构说明

```
第一层（模块主页）：显示该模块下的所有一级分类卡片
    ↓ 点击某个一级分类
第二层（分类页）：显示该分类下的所有二级子分类列表
    ↓ 点击某个二级子分类
第三层（功能列表页）：显示该子分类下的所有功能卡片（每张卡片 = 一个 AI 功能）
```

### 执行方式（AI 助手按此流程操作）

**步骤 1：开发者提供模块内容**

开发者（即你）需要按以下格式提供每个模块的内容：

```
模块名称：[xxx]
第一层分类：
- 分类A
- 分类B
- 分类C
...

分类A 的第二层子分类：
- 子分类1
- 子分类2
...

子分类1 的第三层功能卡片：
- 功能名称：xxx
  功能描述：xxx
- 功能名称：xxx
  功能描述：xxx
```

**步骤 2：AI 助手执行开发**

收到内容后，AI 助手执行：

```
"请按照模块开发流程文档，帮我开发[xxx]模块，
包含以下第一层分类：[列出分类]"
```

然后逐层添加子分类：

```
"请参考营销媒介模块开发文档，帮我在[模块名]模块下
添加[分类A]分类，包含[n]个子分类，内容如下：[详细内容]"
```

### 验收标准
- [ ] 每个模块的第一层分类页面正常显示
- [ ] 点击分类可以进入第二层子分类页面
- [ ] 点击子分类可以进入第三层功能卡片列表页面
- [ ] 功能卡片显示名称和描述（人数显示全部删除）
- [ ] 页面样式与"运营"模块保持一致

---

## ✅ Task 7：最底层功能卡片提示词代码填入

### 目标
为 Task 6 制作的所有功能卡片，填入对应的 AI 系统提示词，使每张卡片点击后能正常进入对话式 UI 并生成内容。

### 白话解释（小白版）
> Task 6 做好了"外壳"（卡片的样子），Task 7 是往每个卡片里填入"灵魂"（AI 提示词）。填完之后，用户点击卡片就能真正使用 AI 功能了。

### 执行流程

**第一步：确认参考文档**
- 参考文件：`docs/通用写作对话式UI模块开发模板.md`
- 所有卡片的对话式 UI 交互逻辑相同，只有系统提示词不同

**第二步：AI 助手执行开发**

```
"现在我们为[模块名]下[分类名]搭建[n]个子项目功能代码，
要求参考 docs/通用写作对话式UI模块开发模板.md 流程进行"
```

然后：

```
"现在请你为所有的卡片的表单页面进行修改"
```

**第三步：提供系统提示词**

AI 助手会询问每个功能需要哪些定制系统提示词，开发者逐一提供。

> 📌 **注意**：除了需要定制系统提示词的功能外，其他所有功能的对话式 UI 流程完全相同，AI 助手可以批量处理。

### 验收标准
- [ ] 每张功能卡片点击后能进入对话式 UI 界面
- [ ] 对话界面能正常调用 AI 并返回内容
- [ ] 历史记录功能正常（对话记录可以保存和查看）
- [ ] 积分消耗正常（每次生成后积分自动扣减）

---

## ✅ Task 8：订单记录页面

### 目标
在用户中心提供"充值记录"页面，显示用户每一笔充值订单的详情。

### 白话解释（小白版）
> 就像支付宝的账单页面，你可以看到自己什么时候充了多少钱、买了哪个套餐、订单状态是什么。

### 页面内容

每条订单记录显示：

| 字段 | 示例 |
|-----|-----|
| 订单号 | ORD-20240115-001 |
| 充值时间 | 2024-01-15 14:30 |
| 套餐名称 | 标准包 |
| 充值金额 | ¥50 |
| 获得积分 | +600 积分 |
| 订单状态 | 已完成 |

### 验收标准
- [ ] 页面正常显示充值订单列表
- [ ] 每条记录包含上述所有字段
- [ ] 分页功能正常

---

## ✅ Task 9：我的文档列表页面

### 目标
在用户中心提供"我的文档"页面，列出用户所有通过 AI 生成并保存的文档。

### 白话解释（小白版）
> 就像 Word 的"最近文件"列表，你可以看到自己之前用 AI 生成的所有内容，点击可以查看详情。

### 页面内容

每条文档记录显示：
- 文档标题
- 所属功能（如"增长战略蓝图"）
- 创建时间
- 字数
- 操作按钮：查看、删除

### 验收标准
- [ ] 页面正常显示文档列表
- [ ] 点击"查看"可以进入文档详情页（Task 10）
- [ ] 点击"删除"弹出确认框，确认后删除

---

## ✅ Task 10：文档详情页面

### 目标
展示单篇 AI 生成文档的完整内容，支持复制全文。

### 白话解释（小白版）
> 就是一个文章阅读页面，显示 AI 帮你生成的完整内容，你可以复制下来使用。

### 页面内容
- 文档标题
- 生成时间 + 所属功能
- 完整正文内容（支持 Markdown 渲染）
- 复制全文按钮
- 返回列表按钮

### 验收标准
- [ ] 页面正确显示文档完整内容
- [ ] Markdown 格式正确渲染（标题、列表、加粗等）
- [ ] 复制全文功能正常

---

## ✅ Task 11：积分不足提示弹窗

### 目标
当用户积分不足以完成本次生成时，弹出提示弹窗，阻止生成并引导用户充值。

### 白话解释（小白版）
> 就像打游戏时钻石不够买装备，系统会弹出"钻石不足，去充值"的提示框。这里是：积分不够时，弹出提示框，告诉用户积分不足，并提供"去充值"按钮。

### 弹窗内容
- 标题：积分不足
- 内容：本次操作需要 [X] 积分，您当前剩余 [Y] 积分，积分不足。
- 按钮1：去充值（跳转到 Task 5 的充值套餐页面）
- 按钮2：取消

### 触发时机
- 用户点击"生成"按钮时
- 后端返回"积分不足"错误时

### 验收标准
- [ ] 积分不足时弹窗正常弹出
- [ ] 弹窗显示正确的所需积分和当前积分数字
- [ ] 点击"去充值"正确跳转到充值页面
- [ ] 点击"取消"关闭弹窗，不执行生成

---

## ✅ Task 12：登录跳转优化

### 目标
未登录用户访问需要登录的页面时，自动跳转到登录页，登录成功后自动返回原来想去的页面。

### 白话解释（小白版）
> 就像你没登录就想看淘宝订单，系统会跳转到登录页，你登录完之后自动回到订单页，不需要重新点一遍。

### 需要做的事情

**第一步：记录用户原本想去的页面**
- 跳转登录页时，把原始 URL 存起来（如：`/login?redirect=/account/credits`）

**第二步：登录成功后跳回原页面**
- 登录成功后，读取 `redirect` 参数，跳转回去
- 如果没有 `redirect` 参数，跳转到首页

### 验收标准
- [ ] 未登录访问受保护页面，自动跳转登录页
- [ ] 登录成功后，自动返回原来想访问的页面
- [ ] 直接访问登录页登录，跳转到首页

---

## ✅ Task 13：全流程最终测试

### 目标
对所有已完成的功能进行端到端测试，确保各模块协同工作正常。

### 测试清单

**积分系统测试：**
- [ ] 新用户注册后积分余额正确显示
- [ ] 使用 AI 功能后积分正确扣减
- [ ] 积分不足时弹窗正确触发
- [ ] 充值套餐页面数据显示正确

**内容模块测试：**
- [ ] 所有模块三层导航正常跳转
- [ ] 功能卡片点击后对话式 UI 正常打开
- [ ] AI 生成内容正常返回
- [ ] 生成后积分自动扣减并更新顶栏显示

**用户中心测试：**
- [ ] 积分消费记录正确记录每次消耗
- [ ] 文档列表正确显示历史生成内容
- [ ] 文档详情页内容完整显示

**登录流程测试：**
- [ ] 未登录跳转登录页
- [ ] 登录后返回原页面

---

## 📌 附录：模块内容填写模板

> 开发者在执行 Task 6 时，按以下格式提供每个模块的内容给 AI 助手。

```markdown
## 模块名称：[xxx]

### 第一层分类
- 分类1
- 分类2
- 分类3

### 分类1 的第二层子分类
- 子分类A
- 子分类B
- 子分类C

### 子分类A 的第三层功能卡片
| 功能名称 | 功能描述 |
|--------|--------|
| 功能1名称 | 功能1的一句话描述 |
| 功能2名称 | 功能2的一句话描述 |
```

---

*文档版本：v1.0 | 创建日期：2026-02-25 | 维护人：喵动AI团队*
