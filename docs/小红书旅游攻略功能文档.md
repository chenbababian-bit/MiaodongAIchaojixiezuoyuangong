# 小红书旅游攻略生成器功能文档

## 功能概述

小红书旅游攻略生成器是一个基于 AI 的内容生成工具，能够根据用户提供的旅行信息，自动生成专业的小红书爆款旅游攻略内容。

## 技术架构

### 后端 API

**路径**: `/app/api/travel-guide/route.ts`

**技术栈**:
- Next.js 16 App Router
- DeepSeek AI API
- TypeScript

**功能特性**:
- 接收用户旅行信息表单数据
- 调用 DeepSeek AI API 生成内容
- 超时控制（55秒）
- 完善的错误处理机制

### 前端页面

**路径**: `/app/writing/travel-guide/page.tsx`

**组件**: `/components/travel-guide-page.tsx`

**技术栈**:
- React 19
- Tailwind CSS
- Radix UI 组件库
- TypeScript

## API 接口文档

### POST /api/travel-guide

生成小红书旅游攻略内容。

**请求体**:
```json
{
  "destination": "目的地（例如：成都、大理、三亚）",
  "budget": "预算（例如：3000元、5000-8000元）",
  "companions": "同行者类型（情侣/闺蜜/亲子/独狼）",
  "days": "旅行天数（例如：3天、5-7天）",
  "style": "风格偏好（极致省钱干货/氛围感大片文案）"
}
```

**成功响应** (200):
```json
{
  "success": true,
  "result": "生成的旅游攻略内容",
  "usage": {
    "prompt_tokens": 1234,
    "completion_tokens": 567,
    "total_tokens": 1801
  }
}
```

**错误响应**:
- 400: 请求参数不完整
- 500: 服务器内部错误或 AI 服务错误
- 504: 请求超时

## 表单字段说明

### 1. 目的地 (destination)
- **类型**: 文本输入
- **必填**: 是
- **示例**: 成都、大理、三亚
- **说明**: 用户计划前往的旅游目的地

### 2. 预算 (budget)
- **类型**: 文本输入
- **必填**: 是
- **示例**: 3000元、5000-8000元
- **说明**: 旅行的预算范围

### 3. 同行者 (companions)
- **类型**: 下拉选择
- **必填**: 是
- **选项**:
  - 情侣
  - 闺蜜
  - 亲子
  - 独狼（独自旅行）
- **说明**: 旅行的同伴类型，影响内容风格和推荐

### 4. 旅行天数 (days)
- **类型**: 文本输入
- **必填**: 是
- **示例**: 3天、5-7天
- **说明**: 计划的旅行时长

### 5. 风格偏好 (style)
- **类型**: 下拉选择
- **必填**: 是
- **选项**:
  - 极致省钱干货
  - 氛围感大片文案
- **说明**: 生成内容的风格倾向

## AI 系统提示词

系统使用专业的小红书爆款旅游攻略架构师角色提示词，包含以下核心能力：

1. **流量收割**: SEO 关键词布局和吸睛标题
2. **情绪共鸣**: 感官描写传递旅行氛围感
3. **转化留存**: 保姆级干货和清晰排版
4. **视觉指引**: 摄影构图和调色建议

### 输出内容结构

生成的攻略包含：
- 5 个爆款标题（标注逻辑类型）
- 一句话痛点/亮点
- 目的地氛围描述
- 硬核攻略（交通/住宿/路线/费用）
- 避雷/私藏 Tips
- 引导互动
- 视觉拍摄脚本
- 10 个标签（3个超级热词 + 4个精准词 + 3个长尾词）

## 环境变量配置

在 `.env.local` 文件中配置：

```env
# DeepSeek API 配置
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
```

## 使用流程

1. 访问页面: `http://localhost:3000/writing/travel-guide`
2. 填写旅行信息表单
3. 点击"生成旅游攻略"按钮
4. 等待 AI 生成内容（通常 10-30 秒）
5. 查看生成结果
6. 点击"复制"按钮复制内容到剪贴板

## 功能特点

### 用户体验
- ✅ 直观的表单界面
- ✅ 实时加载状态提示
- ✅ 一键复制功能
- ✅ 响应式设计（支持移动端）

### 技术特性
- ✅ TypeScript 类型安全
- ✅ 错误处理和用户提示
- ✅ API 超时控制
- ✅ 环境变量配置
- ✅ 现代化 UI 组件

## 文件结构

```
├── app/
│   ├── api/
│   │   └── travel-guide/
│   │       └── route.ts          # API 路由处理
│   └── writing/
│       └── travel-guide/
│           └── page.tsx           # 页面路由
├── components/
│   └── travel-guide-page.tsx     # 页面组件
└── .env.local                     # 环境变量配置
```

## 注意事项

1. **API Key 安全**: 确保 DeepSeek API Key 仅在服务器端使用，不要暴露到客户端
2. **超时处理**: API 调用设置了 55 秒超时，避免长时间等待
3. **错误提示**: 所有错误都会有友好的用户提示
4. **内容质量**: 生成的内容质量取决于输入信息的详细程度

## 后续优化建议

1. 添加历史记录功能，保存用户生成的攻略
2. 支持导出为 PDF 或图片格式
3. 添加更多风格选项
4. 支持批量生成多个目的地攻略
5. 集成图片生成功能，自动生成配图

## 更新日志

### v1.0.0 (2026-01-28)
- ✅ 初始版本发布
- ✅ 实现基础表单和 API 集成
- ✅ 集成 DeepSeek AI
- ✅ 完成前端页面开发
