# 小红书爆款标题功能开发文档

## 📋 项目概述

本文档记录了为"秒懂AI超级写作员工"项目开发小红书爆款标题功能的完整过程，包括需求分析、技术实现、配置统一和示例系统。

**开发时间：** 2026-01-29
**功能模块：** 小红书爆款标题生成
**模板ID：** 6 (数字ID) / xhs-002 (字符串ID)

---

## 🎯 需求分析

### 功能需求

根据系统提示词（小红书爆款标题大师），需要实现一个专门的标题创作功能，帮助用户：
1. 创作吸引眼球、高转化率的爆款标题
2. 理解爆款标题背后的底层逻辑和心理学原理
3. 获得针对不同内容类型和目标人群的标题策略
4. 优化现有标题，提升笔记的流量表现

### 系统提示词要求

**角色定位：**
- 小红书爆款标题创作专家
- 拥有50年经验的专业标题大师
- 精通各类内容赛道的标题创作技巧

**核心目标：**
1. 为用户创作吸引眼球、高转化率的爆款标题
2. 帮助用户理解爆款标题背后的底层逻辑
3. 提供针对不同内容类型的标题策略
4. 优化现有标题，提升流量表现
5. 建立用户的标题创作思维体系

**输出要求：**
- 每次提供3-5个不同风格的标题版本
- 为每个标题标注适用场景、预期效果和核心卖点
- 主动说明标题中使用的创作技巧和心理学原理

---

## 🏗️ 技术架构

### 后端技术栈

- **API框架：** Next.js API Routes
- **AI服务：** DeepSeek API
- **环境变量管理：** .env.local

### 文件结构

```
app/
  └── api/
      └── xiaohongshu-title/
          └── route.ts                 # API路由
components/
  └── xiaohongshu-writing-page.tsx    # 主页面组件
lib/
  ├── template-config.ts              # 模板配置
  └── template-name-registry.ts       # 模板名称注册表
docs/
  └── 小红书爆款标题功能开发文档.md  # 本文档
.env.local                             # 环境变量配置
```

---

## 💻 实现过程

### 第一阶段：API路由创建

#### 1. 创建API端点

创建 `app/api/xiaohongshu-title/route.ts` 文件：

```typescript
import { NextRequest, NextResponse } from "next/server";

// DeepSeek API 配置
const DEEPSEEK_API_KEY = process.env.DEEPSEEK_API_KEY;
const DEEPSEEK_API_URL =
  process.env.DEEPSEEK_API_URL || "https://api.deepseek.com/v1/chat/completions";

const SYSTEM_PROMPT = `# 小红书爆款标题大师
// ... 完整的系统提示词
`;

// 请求数据接口
interface TitleRequest {
  content: string; // 用户输入的内容描述
}

// 设置最大执行时间
export const maxDuration = 60;

export async function POST(request: NextRequest) {
  // ... 完整的API处理逻辑
}
```

**关键特性：**
- 使用完整的"小红书爆款标题大师"系统提示词
- 支持55秒超时控制
- 完整的错误处理机制
- 统一的响应格式

### 第二阶段：配置统一

#### 1. 更新模板配置

修改 `lib/template-config.ts`：

```typescript
"xhs-002": {
  id: "xhs-002",
  category: "xiaohongshu",
  title: "小红书爆款标题",
  desc: "设计出能够吸引目标受众...",
  icon: "title",
  iconBg: "bg-red-500",
  apiEndpoint: "/api/xiaohongshu-title",  // 修改为专用API
  routePath: "/writing/xiaohongshu",
},
```

#### 2. 更新模板名称注册表

修改 `lib/template-name-registry.ts`：

```typescript
"小红书爆款标题": {
  name: "小红书爆款标题",
  apiEndpoint: "/api/xiaohongshu-title",  // 修改为专用API
  routePath: "/writing/xiaohongshu",
  description: "设计出能够吸引目标受众的小红书标题",
},
```

#### 3. 更新页面组件

修改 `components/xiaohongshu-writing-page.tsx`：

```typescript
// 在API端点选择逻辑中添加
if (templateId === "6") {
  // 小红书爆款标题专用API
  apiEndpoint = "/api/xiaohongshu-title";
  requestBody = { content: contentInput };
}
```

### 第三阶段：示例系统实现

#### 1. 创建示例提示词

```typescript
const examplePromptsByTemplate: Record<string, string[]> = {
  "6": [
    "我写了一篇关于日本京都旅游攻略的笔记，内容包括小众景点、美食推荐和省钱技巧，帮我设计吸引人的标题",
    "我的笔记是分享平价好用的国货彩妆测评，想要一个能让人忍不住点进来的标题",
    "我整理了一份大学生兼职避坑指南，包含10种靠谱的赚钱方式，需要一个高点击率的标题"
  ],
};
```

#### 2. 添加专属欢迎语

```typescript
{templateId === "6"
  ? "👋 你好呀！我是你的小红书爆款标题大师，拥有50年的标题创作经验，帮助过无数创作者打造出10w+阅读的爆款笔记！请告诉我你的笔记内容主题、目标人群和账号定位，让我为你创作3-5个不同风格的标题方案！🚀"
  : // 其他条件
}
```

#### 3. 实现示例循环功能

```typescript
<Button
  onClick={() => {
    const examples = getExamplePrompts(templateId);
    const nextIndex = (currentExampleIndex + 1) % examples.length;
    handleExampleClick(examples[currentExampleIndex]);
    setCurrentExampleIndex(nextIndex);
  }}
>
  插入示例 {currentExampleIndex + 1}/{getExamplePrompts(templateId).length}
</Button>
```

---

## 📝 配置一致性验证

### 配置映射表

| 配置位置 | 模板标识 | API端点 | 路由路径 | 状态 |
|---------|---------|---------|---------|------|
| template-config.ts | xhs-002 | `/api/xiaohongshu-title` | `/writing/xiaohongshu` | ✅ |
| template-name-registry.ts | "小红书爆款标题" | `/api/xiaohongshu-title` | `/writing/xiaohongshu` | ✅ |
| xiaohongshu-writing-page.tsx | templateId="6" | `/api/xiaohongshu-title` | - | ✅ |
| API路由 | - | `/api/xiaohongshu-title` | - | ✅ |

**验证结果：** 所有配置已统一，确保同名模板在不同位置使用相同的API端点。

---

## 🎨 示例提示词设计

### 设计原则

1. **具体性**：包含完整的场景信息
2. **多样性**：覆盖不同内容领域
3. **引导性**：帮助用户理解如何描述需求

### 示例分析

#### 示例1：旅游攻略类
```
我写了一篇关于日本京都旅游攻略的笔记，内容包括小众景点、美食推荐和省钱技巧，帮我设计吸引人的标题
```

**包含信息：**
- 内容类型：旅游攻略
- 目的地：日本京都
- 内容要点：小众景点、美食、省钱
- 需求：设计吸引人的标题

#### 示例2：美妆测评类
```
我的笔记是分享平价好用的国货彩妆测评，想要一个能让人忍不住点进来的标题
```

**包含信息：**
- 内容类型：彩妆测评
- 产品特点：平价、国货
- 需求：高点击率标题

#### 示例3：职场干货类
```
我整理了一份大学生兼职避坑指南，包含10种靠谱的赚钱方式，需要一个高点击率的标题
```

**包含信息：**
- 内容类型：避坑指南
- 目标人群：大学生
- 内容要点：10种赚钱方式
- 需求：高点击率标题

---

## 🚀 使用方式

### 访问路径

```
http://localhost:3000/writing/xiaohongshu?template=6&title=小红书爆款标题&source=media-xiaohongshu
```

### 使用流程

1. **访问页面**
   - 从首页或自媒体分类页点击"小红书爆款标题"模板

2. **查看欢迎语**
   - 了解AI助手的角色和能力

3. **参考示例**
   - 点击"插入示例"按钮查看示例
   - 循环浏览3个不同领域的示例

4. **输入需求**
   - 描述笔记的内容主题
   - 说明目标受众和账号定位
   - 提供内容的核心卖点

5. **生成标题**
   - 点击"智能创作"按钮
   - 等待AI生成3-5个标题方案

6. **查看结果**
   - 查看不同风格的标题
   - 了解每个标题的创作技巧
   - 选择最适合的标题使用

---

## 📦 环境配置

### .env.local 配置

```bash
# DeepSeek API 配置
DEEPSEEK_API_KEY=sk-3911af2ade114c229a46cb6fd1c434f4
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions

# 历史记录存储方式
NEXT_PUBLIC_USE_DATABASE=false
```

---

## 🐛 问题排查

### 问题1：功能无法使用

**可能原因：**
1. API端点配置不一致
2. 模板ID映射错误
3. API Key失效

**解决方案：**
1. 检查所有配置文件中的API端点是否统一
2. 验证模板ID在页面组件中的处理逻辑
3. 更新API Key到有效密钥

### 问题2：示例不显示

**可能原因：**
1. 示例映射对象中缺少对应模板ID
2. 示例索引状态未正确初始化

**解决方案：**
1. 在 `examplePromptsByTemplate` 中添加对应模板ID的示例
2. 确保 `currentExampleIndex` 状态正确初始化

---

## 📊 功能特性

### 已实现功能

- ✅ 专用的API端点 `/api/xiaohongshu-title`
- ✅ 完整的系统提示词集成
- ✅ 统一的配置管理
- ✅ 3个示例提示词
- ✅ 示例循环切换功能
- ✅ 专属欢迎语
- ✅ 完整的错误处理
- ✅ 超时控制机制
- ✅ 历史记录保存

### 功能对比

| 功能 | 小红书爆款文案 | 小红书爆款标题 |
|------|---------------|---------------|
| 系统提示词 | 爆款文案大师 | 爆款标题大师 |
| API端点 | `/api/xiaohongshu` | `/api/xiaohongshu-title` |
| 输出内容 | 完整文案（标题+正文+标签） | 3-5个标题方案 |
| 示例数量 | 3个 | 3个 |
| 专属欢迎语 | ✅ | ✅ |

---

## 🎯 未来优化方向

### 功能增强

1. **标题分析功能**
   - 分析现有标题的优缺点
   - 提供具体的优化建议
   - 预测标题的点击率

2. **标题测试功能**
   - A/B测试不同标题
   - 收集用户反馈数据
   - 优化标题推荐算法

3. **标题库功能**
   - 保存常用的标题模板
   - 收藏优秀的标题案例
   - 分享标题创作经验

### 用户体验

1. **实时预览**
   - 边输入边预览标题效果
   - 显示标题长度和字数
   - 提示敏感词和限流词

2. **智能推荐**
   - 根据内容自动推荐标题风格
   - 根据历史数据推荐高转化标题
   - 根据热点趋势推荐时效性标题

---

## 📚 相关文档

- [示例提示词系统实现文档](./示例提示词系统实现文档.md)
- [小红书旅游攻略功能开发文档](./小红书旅游攻略功能开发文档.md)

---

## 👥 开发团队

- **开发者：** Claude Sonnet 4.5
- **项目负责人：** [用户名]
- **开发时间：** 2026-01-29

---

## 🙏 致谢

感谢以下技术和服务的支持：
- Next.js 团队
- DeepSeek AI 服务
- Vercel 部署平台

---

**文档版本：** 1.0
**最后更新：** 2026-01-29
**维护者：** 开发团队
